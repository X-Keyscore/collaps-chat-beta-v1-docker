{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\anton\\\\Desktop\\\\FInt.Tchat\\\\dev\\\\Beta\\\\V1\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\anton\\\\Desktop\\\\FInt.Tchat\\\\dev\\\\Beta\\\\V1\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\anton\\\\Desktop\\\\FInt.Tchat\\\\dev\\\\Beta\\\\V1\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\anton\\\\Desktop\\\\FInt.Tchat\\\\dev\\\\Beta\\\\V1\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\anton\\\\Desktop\\\\FInt.Tchat\\\\dev\\\\Beta\\\\V1\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\anton\\\\Desktop\\\\FInt.Tchat\\\\dev\\\\Beta\\\\V1\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import api from'../../api';var Register=/*#__PURE__*/function(_Component){_inherits(Register,_Component);var _super=_createSuper(Register);function Register(props){var _this;_classCallCheck(this,Register);_this=_super.call(this,props);_this.handleChangeInputPseudo=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var pseudo;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:pseudo=event.target.value;_this.setState({pseudo:{value:pseudo,warning:''}});case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleChangeInputPassword=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var password;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:password=event.target.value;_this.setState({password:{value:password,warning:''}});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.handleLoginUser=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){var _this$state,pseudo,password;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:e.preventDefault();_this$state=_this.state,pseudo=_this$state.pseudo,password=_this$state.password;// Je teste si les champs sont remplis\nif(!(pseudo.value.length!==0&&password.value.length!==0)){_context3.next=5;break;}_context3.next=5;return api.getUserByPseudo(pseudo.value).then(function(res){// Je vérifie si le pseudo a été trouver puis si le mot de passe est bon\n// Si tout est ok je récupère l'id et je l'envoi\nif(res.data.data===null){_this.setState({pseudo:{value:pseudo.value,warning:'pseudo inconnu'}});}else if(res.data.data.password!==password.value){_this.setState({password:{value:password.value,warning:'mot de passe invalide'}});}else{console.log(\"Bienvenue \".concat(res.data.data.pseudo));// Envoi de l'id\n_this.props.onIdSubmit(res.data.data.id);}});case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();_this.state={pseudo:{value:'',warning:''},password:{value:'',warning:''}};return _this;}_createClass(Register,[{key:\"render\",value:function render(){var _this$state2=this.state,pseudo=_this$state2.pseudo,password=_this$state2.password;return/*#__PURE__*/React.createElement(\"div\",{className:\"connection\"},/*#__PURE__*/React.createElement(\"form\",{className:\"connection-form\",onSubmit:this.handleLoginUser},/*#__PURE__*/React.createElement(\"div\",{className:\"connectionToolHeader\"},/*#__PURE__*/React.createElement(\"div\",{className:\"connectionToolHeader-title\"},\"FInt.Tchat\"),/*#__PURE__*/React.createElement(\"div\",{className:\"connectionToolHeader-subtitle\"},\"Bienvenue dans l'espace de connexion\")),/*#__PURE__*/React.createElement(\"div\",{className:\"connection-body scroller\"},/*#__PURE__*/React.createElement(\"div\",{className:\"connection-body-input\"},/*#__PURE__*/React.createElement(\"div\",{className:\"title\"},\"Pseudo \",pseudo.warning?/*#__PURE__*/React.createElement(\"span\",{className:\"title-warning\"},\"- \",pseudo.warning):null),/*#__PURE__*/React.createElement(\"input\",{className:\"input \".concat(pseudo.warning?'input-warning':''),type:\"text\",autoFocus:true,value:pseudo.value,onChange:this.handleChangeInputPseudo}),/*#__PURE__*/React.createElement(\"div\",{className:\"spacer\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"title\"},\"Mot de passe \",password.warning?/*#__PURE__*/React.createElement(\"span\",{className:\"title-warning\"},\"- \",password.warning):null),/*#__PURE__*/React.createElement(\"input\",{className:\"input \".concat(password.warning?'input-warning':''),type:\"password\",value:password.value,onChange:this.handleChangeInputPassword}),/*#__PURE__*/React.createElement(\"div\",{className:\"link\"},/*#__PURE__*/React.createElement(\"a\",{href:\"https://google.com\"},\"Tu as oubli\\xE9 ton mot de passe ?\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"connectionToolFooter\"},/*#__PURE__*/React.createElement(\"div\",{className:\"connectionToolFooter-btn\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn-text-default\",type:\"submit\"},/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},\"Se connecter\")),/*#__PURE__*/React.createElement(\"button\",{className:\"btn-text-simple\",type:\"button\",onClick:this.props.hide},/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},\"S'inscrire\"))))));}}]);return Register;}(Component);export default Register;","map":{"version":3,"sources":["C:/Users/anton/Desktop/FInt.Tchat/dev/Beta/V1/client/src/components/Connection/Login.js"],"names":["React","Component","api","Register","props","handleChangeInputPseudo","event","pseudo","target","value","setState","warning","handleChangeInputPassword","password","handleLoginUser","e","preventDefault","state","length","getUserByPseudo","then","res","data","console","log","onIdSubmit","id","hide"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport api from '../../api'\r\n\r\nclass Register extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      pseudo: {\r\n        value: '',\r\n        warning: ''\r\n      },\r\n      password: {\r\n        value: '',\r\n        warning: ''\r\n      }\r\n    }\r\n  }\r\n\r\n  handleChangeInputPseudo = async (event) => {\r\n    const pseudo = event.target.value\r\n    this.setState({\r\n      pseudo: {\r\n        value: pseudo,\r\n        warning: ''\r\n      }\r\n    })\r\n  }\r\n\r\n  handleChangeInputPassword = async (event) => {\r\n    const password = event.target.value\r\n    this.setState({\r\n      password: {\r\n        value: password,\r\n        warning: ''\r\n      }\r\n    })\r\n  }\r\n\r\n  handleLoginUser = async (e) => {\r\n    e.preventDefault()\r\n\r\n    const { pseudo, password } = this.state\r\n\r\n    // Je teste si les champs sont remplis\r\n    if (pseudo.value.length !== 0 && password.value.length !== 0) {\r\n\r\n      // Requête a l'api pour rechercher le pseudo\r\n      await api.getUserByPseudo(pseudo.value).then(res => {\r\n\r\n        // Je vérifie si le pseudo a été trouver puis si le mot de passe est bon\r\n        // Si tout est ok je récupère l'id et je l'envoi\r\n        if (res.data.data === null) {\r\n          this.setState({\r\n            pseudo: {\r\n              value: pseudo.value,\r\n              warning: 'pseudo inconnu'\r\n            }\r\n          })\r\n        } else if (res.data.data.password !== password.value) {\r\n          this.setState({\r\n            password: {\r\n              value: password.value,\r\n              warning: 'mot de passe invalide'\r\n            }\r\n          })\r\n        } else {\r\n          console.log(`Bienvenue ${res.data.data.pseudo}`)\r\n          // Envoi de l'id\r\n          this.props.onIdSubmit(res.data.data.id)\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { pseudo, password } = this.state\r\n    return (\r\n      <div className=\"connection\">\r\n        <form className=\"connection-form\" onSubmit={this.handleLoginUser}>\r\n          <div className=\"connectionToolHeader\">\r\n            <div className=\"connectionToolHeader-title\">\r\n              FInt.Tchat\r\n          </div>\r\n            <div className=\"connectionToolHeader-subtitle\">\r\n              Bienvenue dans l'espace de connexion\r\n          </div>\r\n          </div>\r\n          <div className=\"connection-body scroller\">\r\n            <div className=\"connection-body-input\">\r\n              <div className=\"title\">\r\n                Pseudo {pseudo.warning ? <span className=\"title-warning\">- {pseudo.warning}</span> : null}\r\n              </div>\r\n              <input\r\n                className={`input ${pseudo.warning ? 'input-warning' : ''}`}\r\n                type=\"text\"\r\n                autoFocus\r\n                value={pseudo.value}\r\n                onChange={this.handleChangeInputPseudo}\r\n              />\r\n              <div className=\"spacer\"></div>\r\n              <div className=\"title\">\r\n                Mot de passe {password.warning ? <span className=\"title-warning\">- {password.warning}</span> : null}\r\n              </div>\r\n              <input\r\n                className={`input ${password.warning ? 'input-warning' : ''}`}\r\n                type=\"password\"\r\n                value={password.value}\r\n                onChange={this.handleChangeInputPassword}\r\n              />\r\n              <div className=\"link\"><a href=\"https://google.com\">Tu as oublié ton mot de passe ?</a></div>\r\n            </div>\r\n          </div>\r\n          <div className=\"connectionToolFooter\">\r\n            <div className=\"connectionToolFooter-btn\">\r\n              <button className=\"btn-text-default\" type=\"submit\">\r\n                <div className=\"content\">Se connecter</div>\r\n              </button>\r\n              <button className=\"btn-text-simple\" type=\"button\" onClick={this.props.hide}>\r\n                <div className=\"content\">S'inscrire</div>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Register"]},"metadata":{},"sourceType":"module"}