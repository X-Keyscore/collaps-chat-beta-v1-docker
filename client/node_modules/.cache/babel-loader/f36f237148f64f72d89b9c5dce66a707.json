{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\anton\\\\Desktop\\\\FInt.Tchat\\\\dev\\\\V10\\\\client\\\\src\\\\components\\\\sidebar\\\\windows\\\\setting.js\";\nimport React, { Component } from 'react';\nimport ReactDOM from \"react-dom\";\nimport api from \"../../../api\";\n\nconst {\n  validityPseudo\n} = require(\"../../../functions/validity.js\");\n\nexport default class Setting extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChangeInputPseudo = async event => {\n      const pseudo = event.target.value;\n      const rep = validityPseudo(pseudo);\n      this.setState({\n        pseudo: {\n          value: pseudo,\n          warning: rep.warning,\n          valid: rep.valid\n        }\n      });\n    };\n\n    this.state = {\n      selectedFiles: undefined,\n      currentFile: undefined,\n      progress: 0,\n      message: \"\",\n      fileInfos: [],\n      pseudo: {\n        value: 'x',\n        warning: '',\n        valid: false\n      }\n    }; // Cette liaison est nécéssaire afin de permettre\n    // l'utilisation de `this` dans la fonction de rappel.\n\n    this.selectFile = this.selectFile.bind(this);\n    this.upload = this.upload.bind(this);\n    this.hide = this.hide.bind(this);\n    this.handleUpdateUser = this.handleUpdateUser.bind(this);\n  }\n\n  selectFile(event) {\n    console.log(event.target);\n    this.setState({\n      selectedFiles: event.target.files\n    });\n  }\n\n  upload() {\n    let currentFile = this.state.selectedFiles[0];\n    this.setState({\n      progress: 0,\n      currentFile: currentFile\n    });\n    api.insertFile(currentFile, event => {\n      this.setState({\n        progress: Math.round(100 * event.loaded / event.total)\n      });\n    }).then(response => {\n      this.setState({\n        message: response.data.message\n      }); //return UploadService.getFiles();\n    }).then(files => {\n      this.setState({\n        fileInfos: files.data\n      });\n    }).catch(() => {\n      this.setState({\n        progress: 0,\n        message: \"Could not upload the file!\",\n        currentFile: undefined\n      });\n    });\n    this.setState({\n      selectedFiles: undefined\n    });\n  }\n\n  hide() {\n    this.setState({\n      pseudo: {\n        value: 'x',\n        warning: '',\n        valid: false\n      }\n    });\n    this.props.hide();\n  }\n\n  handleUpdateUser() {\n    const {\n      pseudo\n    } = this.state;\n\n    if (pseudo.valid === true) {\n      // Requête a l'api pour rechercher le pseudo\n      api.getUserByPseudo(pseudo.value).then(res => {\n        // Je vérifie si le pseudo est déjà utilisé\n        // sinon on crée l'utilisateur\n        if (res.data.data !== null) {\n          this.setState({\n            pseudo: {\n              value: pseudo.value,\n              warning: 'ce pseudo est déjà utilisé'\n            }\n          });\n        } else {\n          this.props.hide();\n          api.updateUserById(this.props.client.id, {\n            data: {\n              pseudo: pseudo.value\n            }\n          }).then(res => {\n            console.log(\"Mise à jour de l'utilisateur\");\n          }, error => {\n            console.log(\"Problème d'enregistrement dans la base de données\");\n            console.log(error);\n          });\n        }\n      });\n    } else {\n      // \n      this.setState({\n        pseudo: {\n          value: pseudo.value,\n          warning: 'Ne peut être vide'\n        }\n      });\n    }\n  }\n\n  render() {\n    const {\n      pseudo\n    } = this.state; // Récupération des données du client dans l’état local\n\n    const client = this.props.client;\n    return this.props.isShowing ? ReactDOM.createPortal( /*#__PURE__*/React.createElement(\"div\", {\n      className: \"window\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"window-backdrop\",\n      onClick: this.props.hide,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"window-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"windowToolHeader\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"windowToolHeader-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }\n    }, \"Param\\xE8tres\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"windowToolHeader-subtitle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }\n    }, \"Clic sur ton pseudo pour le modifier\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"clientSetting-body scroller\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"clientSetting-body-divider\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 19\n      }\n    }, \"Compte\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 54\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"clientSetting-body-account\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"clientSetting-body-account-avatar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"avatar\",\n      src: \"https://cdn.discordapp.com/avatars/456863924210630657/1d92f56700533a272820d955d2dc4f29.png?size=128\",\n      alt: \"user account\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"avatarUploaderInput\",\n      type: \"file\",\n      multiple: \"\",\n      accept: \".jpg,.jpeg,.png,.gif\",\n      onChange: this.selectFile,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"avatarUploaderIcon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"clientSetting-body-account-info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pseudo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 23\n      }\n    }, \"Pseudo \", pseudo.warning ? /*#__PURE__*/React.createElement(\"span\", {\n      className: \"title-warning\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 71\n      }\n    }, \"- \", pseudo.warning) : null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"input\",\n      type: \"text\",\n      maxLength: \"32\",\n      required: true,\n      value: pseudo.value === \"x\" ? client === null ? null : client.pseudo : pseudo.value,\n      onChange: this.handleChangeInputPseudo,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tag\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 23\n      }\n    }, \"Tag\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 23\n      }\n    }, \"#1012\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"id\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 23\n      }\n    }, \"Id\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 23\n      }\n    }, client.id)))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"clientSetting-body-divider\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 19\n      }\n    }, \"Informations\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 60\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"clientSetting-body-info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"clientSetting-body-info-compatibility\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 21\n      }\n    }, \"Compatible\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"navigator\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 23\n      }\n    }, \"Mozilla Firefox\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 23\n      }\n    }, \"Google Chrome\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 23\n      }\n    }, \"Apple Safari\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 23\n      }\n    }, \"Microsoft Edge\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"clientSetting-body-info-support\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 21\n      }\n    }, \"Support\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"navigator\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 23\n      }\n    }, \"Windows\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 23\n      }\n    }, \"MacOS\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 23\n      }\n    }, \"Android\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 23\n      }\n    }, \"iOS\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"windowToolFooter\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn-icon-default-red\",\n      type: \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      viewBox: \"0 0 384 384\",\n      \"aria-hidden\": \"false\",\n      width: \"21\",\n      height: \"21\",\n      x: \"0\",\n      y: \"0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"path\", {\n      fill: \"currentColor\",\n      d: \"M341.333,0H42.667C19.093,0,0,19.093,0,42.667V128h42.667V42.667h298.667v298.667H42.667V256H0v85.333\\r C0,364.907,19.093,384,42.667,384h298.667C364.907,384,384,364.907,384,341.333V42.667C384,19.093,364.907,0,341.333,0z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"polygon\", {\n      fill: \"currentColor\",\n      points: \"151.147,268.48 181.333,298.667 288,192 181.333,85.333 151.147,115.52 206.293,170.667 0,170.667 0,213.333 \\r 206.293,213.333\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 21\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"windowToolFooter-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn-text-default\",\n      type: \"button\",\n      onClick: this.handleUpdateUser,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 21\n      }\n    }, \"Termin\\xE9\")), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn-text-simple\",\n      type: \"button\",\n      onClick: this.hide,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 21\n      }\n    }, \"Annuler\")), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn-text-simple\",\n      type: \"button\",\n      onClick: this.upload,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 21\n      }\n    }, \"upload\")))))), document.body) : null;\n  }\n\n}\n/*\r\n\r\n  <input\r\n                className={`input ${pseudo.warning ? 'input-warning' : ''}`}\r\n                type=\"text\"\r\n                autoFocus\r\n                required\r\n                value={pseudo.value}\r\n                onChange={this.handleChangeInputPseudo}\r\n              />\r\n              */","map":{"version":3,"sources":["C:/Users/anton/Desktop/FInt.Tchat/dev/V10/client/src/components/sidebar/windows/setting.js"],"names":["React","Component","ReactDOM","api","validityPseudo","require","Setting","constructor","props","handleChangeInputPseudo","event","pseudo","target","value","rep","setState","warning","valid","state","selectedFiles","undefined","currentFile","progress","message","fileInfos","selectFile","bind","upload","hide","handleUpdateUser","console","log","files","insertFile","Math","round","loaded","total","then","response","data","catch","getUserByPseudo","res","updateUserById","client","id","error","render","isShowing","createPortal","document","body"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport ReactDOM from \"react-dom\";\r\n\r\nimport api from \"../../../api\"\r\nconst { validityPseudo } = require(\"../../../functions/validity.js\");\r\n\r\nexport default class Setting extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      selectedFiles: undefined,\r\n      currentFile: undefined,\r\n      progress: 0,\r\n      message: \"\",\r\n      fileInfos: [],\r\n      pseudo: {\r\n        value: 'x',\r\n        warning: '',\r\n        valid: false\r\n      }\r\n    }\r\n\r\n    // Cette liaison est nécéssaire afin de permettre\r\n    // l'utilisation de `this` dans la fonction de rappel.\r\n    this.selectFile = this.selectFile.bind(this);\r\n    this.upload = this.upload.bind(this);\r\n    this.hide = this.hide.bind(this);\r\n    this.handleUpdateUser = this.handleUpdateUser.bind(this);\r\n  }\r\n\r\n  selectFile(event) {\r\n    console.log(event.target)\r\n    this.setState({\r\n      selectedFiles: event.target.files,\r\n    });\r\n  }\r\n\r\n  upload() {\r\n    let currentFile = this.state.selectedFiles[0];\r\n\r\n    this.setState({\r\n      progress: 0,\r\n      currentFile: currentFile,\r\n    });\r\n\r\n    api.insertFile(currentFile, (event) => {\r\n      this.setState({\r\n        progress: Math.round((100 * event.loaded) / event.total),\r\n      });\r\n    })\r\n    \r\n      .then((response) => {\r\n        this.setState({\r\n          message: response.data.message,\r\n        });\r\n        //return UploadService.getFiles();\r\n      })\r\n      .then((files) => {\r\n        this.setState({\r\n          fileInfos: files.data,\r\n        });\r\n      })\r\n      .catch(() => {\r\n        this.setState({\r\n          progress: 0,\r\n          message: \"Could not upload the file!\",\r\n          currentFile: undefined,\r\n        });\r\n      });\r\n\r\n    this.setState({\r\n      selectedFiles: undefined,\r\n    });\r\n  }\r\n\r\n  handleChangeInputPseudo = async event => {\r\n    const pseudo = event.target.value\r\n    const rep = validityPseudo(pseudo);\r\n    this.setState({\r\n      pseudo: {\r\n        value: pseudo,\r\n        warning: rep.warning,\r\n        valid: rep.valid\r\n      }\r\n    })\r\n  }\r\n\r\n  hide() {\r\n    this.setState({\r\n      pseudo: {\r\n        value: 'x',\r\n        warning: '',\r\n        valid: false\r\n      }\r\n    })\r\n\r\n    this.props.hide()\r\n  }\r\n\r\n  handleUpdateUser() {\r\n    const { pseudo } = this.state\r\n    if (pseudo.valid === true) {\r\n\r\n      // Requête a l'api pour rechercher le pseudo\r\n      api.getUserByPseudo(pseudo.value).then(res => {\r\n\r\n        // Je vérifie si le pseudo est déjà utilisé\r\n        // sinon on crée l'utilisateur\r\n        if (res.data.data !== null) {\r\n          this.setState({\r\n            pseudo: {\r\n              value: pseudo.value,\r\n              warning: 'ce pseudo est déjà utilisé'\r\n            }\r\n          })\r\n        } else {\r\n\r\n          this.props.hide()\r\n\r\n          api.updateUserById(this.props.client.id, { data: { pseudo: pseudo.value } }).then(\r\n            (res) => {\r\n              console.log(\"Mise à jour de l'utilisateur\")\r\n            },\r\n            (error) => {\r\n              console.log(\"Problème d'enregistrement dans la base de données\")\r\n              console.log(error)\r\n            })\r\n        }\r\n      })\r\n    } else {\r\n      // \r\n      this.setState({\r\n        pseudo: {\r\n          value: pseudo.value,\r\n          warning: 'Ne peut être vide'\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { pseudo } = this.state\r\n    // Récupération des données du client dans l’état local\r\n    const client = this.props.client\r\n\r\n    return (\r\n      this.props.isShowing\r\n        ? ReactDOM.createPortal(\r\n          <div className=\"window\">\r\n            <div className=\"window-backdrop\" onClick={this.props.hide}></div>\r\n            <form className=\"window-container\">\r\n              <div className=\"windowToolHeader\">\r\n                <div className=\"windowToolHeader-title\">\r\n                  Paramètres\r\n                </div>\r\n                <div className=\"windowToolHeader-subtitle\">\r\n                  Clic sur ton pseudo pour le modifier\r\n                </div>\r\n              </div>\r\n              <div className=\"clientSetting-body scroller\">\r\n                <div className=\"clientSetting-body-divider\">\r\n                  <div className=\"title\">Compte</div><div className=\"bar\"></div>\r\n                </div>\r\n\r\n                <div className=\"clientSetting-body-account\">\r\n                  <div className=\"clientSetting-body-account-avatar\">\r\n                    <img className=\"avatar\" src=\"https://cdn.discordapp.com/avatars/456863924210630657/1d92f56700533a272820d955d2dc4f29.png?size=128\"\r\n                      alt=\"user account\" />\r\n                    <input className=\"avatarUploaderInput\" type=\"file\" multiple=\"\" accept=\".jpg,.jpeg,.png,.gif\" onChange={this.selectFile} />\r\n                    <div className=\"avatarUploaderIcon\"></div>\r\n                  </div>\r\n                  <div className=\"clientSetting-body-account-info\">\r\n                    <div className=\"pseudo\">\r\n                      <div className=\"title\">Pseudo {pseudo.warning ? <span className=\"title-warning\">- {pseudo.warning}</span> : null}</div>\r\n                      <div className=\"content\">\r\n                        <input\r\n                          className=\"input\"\r\n                          type=\"text\"\r\n                          maxLength=\"32\"\r\n                          required\r\n                          value={pseudo.value === \"x\" ? client === null ? null : client.pseudo : pseudo.value}\r\n                          onChange={this.handleChangeInputPseudo}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"tag\">\r\n                      <div className=\"title\">Tag</div>\r\n                      <div className=\"content\">#1012</div>\r\n                    </div>\r\n                    <div className=\"id\">\r\n                      <div className=\"title\">Id</div>\r\n                      <div className=\"content\">{client.id}</div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"clientSetting-body-divider\">\r\n                  <div className=\"title\">Informations</div><div className=\"bar\"></div>\r\n                </div>\r\n\r\n                <div className=\"clientSetting-body-info\">\r\n                  <div className=\"clientSetting-body-info-compatibility\">\r\n                    <div className=\"title\">Compatible</div>\r\n                    <div className=\"navigator\">\r\n                      <li>Mozilla Firefox</li>\r\n                      <li>Google Chrome</li>\r\n                      <li>Apple Safari</li>\r\n                      <li>Microsoft Edge</li>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"clientSetting-body-info-support\">\r\n                    <div className=\"title\">Support</div>\r\n                    <div className=\"navigator\">\r\n                      <li>Windows</li>\r\n                      <li>MacOS</li>\r\n                      <li>Android</li>\r\n                      <li>iOS</li>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n              <div className=\"windowToolFooter\">\r\n                <button className=\"btn-icon-default-red\" type=\"button\">\r\n                  <svg viewBox=\"0 0 384 384\" aria-hidden=\"false\" width=\"21\" height=\"21\" x=\"0\" y=\"0\">\r\n                    <path fill=\"currentColor\" d=\"M341.333,0H42.667C19.093,0,0,19.093,0,42.667V128h42.667V42.667h298.667v298.667H42.667V256H0v85.333\r\n                      C0,364.907,19.093,384,42.667,384h298.667C364.907,384,384,364.907,384,341.333V42.667C384,19.093,364.907,0,341.333,0z\"/>\r\n                    <polygon fill=\"currentColor\" points=\"151.147,268.48 181.333,298.667 288,192 181.333,85.333 151.147,115.52 206.293,170.667 0,170.667 0,213.333 \r\n                      206.293,213.333\" />\r\n                  </svg>\r\n                </button>\r\n                <div className=\"windowToolFooter-btn\">\r\n                  <button className=\"btn-text-default\" type=\"button\" onClick={this.handleUpdateUser}>\r\n                    <div className=\"content\">Terminé</div>\r\n                  </button>\r\n                  <button className=\"btn-text-simple\" type=\"button\" onClick={this.hide}>\r\n                    <div className=\"content\">Annuler</div>\r\n                  </button>\r\n                  <button className=\"btn-text-simple\" type=\"button\" onClick={this.upload}>\r\n                    <div className=\"content\">upload</div>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>,\r\n          document.body\r\n        ) : null\r\n    )\r\n  }\r\n}\r\n\r\n/*\r\n\r\n  <input\r\n                className={`input ${pseudo.warning ? 'input-warning' : ''}`}\r\n                type=\"text\"\r\n                autoFocus\r\n                required\r\n                value={pseudo.value}\r\n                onChange={this.handleChangeInputPseudo}\r\n              />\r\n              */"]},"metadata":{},"sourceType":"module"}