{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\anton\\\\Desktop\\\\FInt.Tchat\\\\dev\\\\V8\\\\client\\\\src\\\\contexts\\\\UserProvider.js\";\nimport React, { useContext, useState, useEffect } from 'react';\nimport api from \"../api\";\nimport SocketContext from './SocketProvider';\nconst UserContext = React.createContext();\nexport function useUser() {\n  return useContext(UserContext);\n}\nexport function UserProvider({\n  id,\n  children\n}) {\n  const [state, setState] = useState({\n    user: null,\n    isLoaded: false,\n    requesting: true,\n    error: null\n  });\n  useEffect(() => {\n    console.log(state);\n\n    if (state.requesting) {\n      setState({\n        isLoaded: true\n      });\n      api.getUserById(state.id).then(user => {\n        setState({\n          user: user.data.data,\n          isLoaded: false,\n          requesting: false\n        });\n      }, error => {\n        setState({\n          isLoaded: false,\n          requesting: false,\n          error\n        });\n      });\n    }\n  });\n  /*\r\n  createUser = () => {\r\n    }\r\n    updateUser = () => {\r\n    }\r\n    deleteUser = () => {\r\n    }*/\n  //const socket = this.context.socket\n\n  /*\r\n  socket.on('user-disconnected', name => {\r\n    console.log(\"test\")\r\n  })\r\n  */\n\n  const value = {\n    user: state.user\n  };\n  return /*#__PURE__*/React.createElement(UserContext.Provider, {\n    value: value,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }\n  }, children);\n}\nexport default UserContext;","map":{"version":3,"sources":["C:/Users/anton/Desktop/FInt.Tchat/dev/V8/client/src/contexts/UserProvider.js"],"names":["React","useContext","useState","useEffect","api","SocketContext","UserContext","createContext","useUser","UserProvider","id","children","state","setState","user","isLoaded","requesting","error","console","log","getUserById","then","data","value"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,QAA5B,EAAsCC,SAAtC,QAAuD,OAAvD;AAEA,OAAOC,GAAP,MAAgB,QAAhB;AAEA,OAAOC,aAAP,MAA0B,kBAA1B;AAEA,MAAMC,WAAW,GAAGN,KAAK,CAACO,aAAN,EAApB;AAEA,OAAO,SAASC,OAAT,GAAmB;AACxB,SAAOP,UAAU,CAACK,WAAD,CAAjB;AACD;AAED,OAAO,SAASG,YAAT,CAAsB;AAAEC,EAAAA,EAAF;AAAMC,EAAAA;AAAN,CAAtB,EAAwC;AAC7C,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBX,QAAQ,CAAC;AACjCY,IAAAA,IAAI,EAAE,IAD2B;AAEjCC,IAAAA,QAAQ,EAAE,KAFuB;AAGjCC,IAAAA,UAAU,EAAE,IAHqB;AAIjCC,IAAAA,KAAK,EAAE;AAJ0B,GAAD,CAAlC;AAOAd,EAAAA,SAAS,CAAC,MAAM;AACde,IAAAA,OAAO,CAACC,GAAR,CAAYP,KAAZ;;AACA,QAAIA,KAAK,CAACI,UAAV,EAAsB;AACpBH,MAAAA,QAAQ,CAAC;AACPE,QAAAA,QAAQ,EAAE;AADH,OAAD,CAAR;AAGAX,MAAAA,GAAG,CAACgB,WAAJ,CAAgBR,KAAK,CAACF,EAAtB,EAA0BW,IAA1B,CACGP,IAAD,IAAU;AACRD,QAAAA,QAAQ,CAAC;AACPC,UAAAA,IAAI,EAAEA,IAAI,CAACQ,IAAL,CAAUA,IADT;AAEPP,UAAAA,QAAQ,EAAE,KAFH;AAGPC,UAAAA,UAAU,EAAE;AAHL,SAAD,CAAR;AAKD,OAPH,EAQGC,KAAD,IAAW;AACTJ,QAAAA,QAAQ,CAAC;AACPE,UAAAA,QAAQ,EAAE,KADH;AAEPC,UAAAA,UAAU,EAAE,KAFL;AAGPC,UAAAA;AAHO,SAAD,CAAR;AAKD,OAdH;AAgBD;AACF,GAvBQ,CAAT;AAyBA;;;;;;;AAYA;;AACA;;;;;;AAMA,QAAMM,KAAK,GAAG;AACZT,IAAAA,IAAI,EAAEF,KAAK,CAACE;AADA,GAAd;AAIA,sBACE,oBAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAES,KAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGZ,QADH,CADF;AAKD;AAED,eAAeL,WAAf","sourcesContent":["import React, { useContext, useState, useEffect } from 'react'\r\n\r\nimport api from \"../api\"\r\n\r\nimport SocketContext from './SocketProvider';\r\n\r\nconst UserContext = React.createContext()\r\n\r\nexport function useUser() {\r\n  return useContext(UserContext)\r\n}\r\n\r\nexport function UserProvider({ id, children }) {\r\n  const [state, setState] = useState({\r\n    user: null,\r\n    isLoaded: false,\r\n    requesting: true,\r\n    error: null\r\n  })\r\n\r\n  useEffect(() => {\r\n    console.log(state)\r\n    if (state.requesting) {\r\n      setState({\r\n        isLoaded: true\r\n      });\r\n      api.getUserById(state.id).then(\r\n        (user) => {\r\n          setState({\r\n            user: user.data.data,\r\n            isLoaded: false,\r\n            requesting: false\r\n          });\r\n        },\r\n        (error) => {\r\n          setState({\r\n            isLoaded: false,\r\n            requesting: false,\r\n            error\r\n          });\r\n        }\r\n      )\r\n    }\r\n  })\r\n\r\n  /*\r\n  createUser = () => {\r\n\r\n  }\r\n\r\n  updateUser = () => {\r\n\r\n  }\r\n\r\n  deleteUser = () => {\r\n\r\n  }*/\r\n  //const socket = this.context.socket\r\n  /*\r\n  socket.on('user-disconnected', name => {\r\n    console.log(\"test\")\r\n  })\r\n  */\r\n\r\n  const value = {\r\n    user: state.user\r\n  }\r\n\r\n  return (\r\n    <UserContext.Provider value={value}>\r\n      {children}\r\n    </UserContext.Provider>\r\n  )\r\n}\r\n\r\nexport default UserContext"]},"metadata":{},"sourceType":"module"}