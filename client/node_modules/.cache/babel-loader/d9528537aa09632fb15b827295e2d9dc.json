{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\anton\\\\Desktop\\\\collaps-chat\\\\dev\\\\Beta\\\\V1\\\\client\\\\src\\\\contexts\\\\UserProvider.js\";\nimport React, { useContext, useState, useEffect } from 'react';\nimport api from \"../api\";\n\nrequire('dotenv').config({\n  path: '../../.env'\n});\n\nconsole.log(process.env.SERVER_ORIGIN);\nconst UserContext = React.createContext();\nexport function useUser() {\n  return useContext(UserContext);\n}\nexport function UserProvider({\n  storageLocal,\n  children\n}) {\n  const [client, setClient] = useState(null);\n  const id = storageLocal.id;\n  const token = storageLocal.token;\n  useEffect(() => {\n    // Si le client n'est pas null pas besoin de mise a jour\n    if (client === null) {\n      // Je récupère les données du client grace à l'api\n      api.getUserById(id).then(response => {\n        var userEdit = response.data.user; // Assignation de la valeur \"avatar\" à \"userEdit\"\n\n        Object.assign(userEdit, {\n          avatarLink: `/api/file/get/avatars/`\n        }); // https://collaps.xyz/collapsapi/api/file/avatar/id/\n\n        return setClient(userEdit);\n      });\n    }\n  }, []);\n\n  function updateUser(id, payload) {\n    Object.assign(payload, {\n      token\n    });\n    api.updateUserById(id, payload);\n  }\n\n  const value = {\n    client,\n    setClient,\n    updateUser\n  };\n  return /*#__PURE__*/React.createElement(UserContext.Provider, {\n    value: value,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 5\n    }\n  }, children);\n}\nexport default UserContext; // https://dmitripavlutin.com/react-usestate-hook-guide/","map":{"version":3,"sources":["C:/Users/anton/Desktop/collaps-chat/dev/Beta/V1/client/src/contexts/UserProvider.js"],"names":["React","useContext","useState","useEffect","api","require","config","path","console","log","process","env","SERVER_ORIGIN","UserContext","createContext","useUser","UserProvider","storageLocal","children","client","setClient","id","token","getUserById","then","response","userEdit","data","user","Object","assign","avatarLink","updateUser","payload","updateUserById","value"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,QAA5B,EAAsCC,SAAtC,QAAuD,OAAvD;AACA,OAAOC,GAAP,MAAgB,QAAhB;;AACAC,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB,CAAyB;AAAEC,EAAAA,IAAI,EAAE;AAAR,CAAzB;;AACAC,OAAO,CAACC,GAAR,CAAYC,OAAO,CAACC,GAAR,CAAYC,aAAxB;AACA,MAAMC,WAAW,GAAGb,KAAK,CAACc,aAAN,EAApB;AAEA,OAAO,SAASC,OAAT,GAAmB;AACxB,SAAOd,UAAU,CAACY,WAAD,CAAjB;AACD;AAED,OAAO,SAASG,YAAT,CAAsB;AAAEC,EAAAA,YAAF;AAAgBC,EAAAA;AAAhB,CAAtB,EAAkD;AACvD,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBlB,QAAQ,CAAC,IAAD,CAApC;AACA,QAAMmB,EAAE,GAAGJ,YAAY,CAACI,EAAxB;AACA,QAAMC,KAAK,GAAGL,YAAY,CAACK,KAA3B;AAEAnB,EAAAA,SAAS,CAAC,MAAM;AACd;AACA,QAAIgB,MAAM,KAAK,IAAf,EAAqB;AACnB;AACAf,MAAAA,GAAG,CAACmB,WAAJ,CAAgBF,EAAhB,EAAoBG,IAApB,CACGC,QAAD,IAAc;AACZ,YAAIC,QAAQ,GAAGD,QAAQ,CAACE,IAAT,CAAcC,IAA7B,CADY,CAEZ;;AACAC,QAAAA,MAAM,CAACC,MAAP,CAAcJ,QAAd,EAAwB;AAAEK,UAAAA,UAAU,EAAG;AAAf,SAAxB,EAHY,CAGqD;;AACjE,eAAOX,SAAS,CAACM,QAAD,CAAhB;AACH,OAND;AAOD;AACF,GAZQ,EAYN,EAZM,CAAT;;AAcA,WAASM,UAAT,CAAoBX,EAApB,EAAwBY,OAAxB,EAAiC;AAC/BJ,IAAAA,MAAM,CAACC,MAAP,CAAcG,OAAd,EAAuB;AAAEX,MAAAA;AAAF,KAAvB;AACAlB,IAAAA,GAAG,CAAC8B,cAAJ,CAAmBb,EAAnB,EAAuBY,OAAvB;AACD;;AAED,QAAME,KAAK,GAAG;AACZhB,IAAAA,MADY;AAEZC,IAAAA,SAFY;AAGZY,IAAAA;AAHY,GAAd;AAMA,sBACE,oBAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAEG,KAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGjB,QADH,CADF;AAKD;AAED,eAAeL,WAAf,C,CAEA","sourcesContent":["import React, { useContext, useState, useEffect } from 'react'\r\nimport api from \"../api\"\r\nrequire('dotenv').config({ path: '../../.env' })\r\nconsole.log(process.env.SERVER_ORIGIN)\r\nconst UserContext = React.createContext()\r\n\r\nexport function useUser() {\r\n  return useContext(UserContext)\r\n}\r\n\r\nexport function UserProvider({ storageLocal, children }) {\r\n  const [client, setClient] = useState(null)\r\n  const id = storageLocal.id\r\n  const token = storageLocal.token\r\n\r\n  useEffect(() => {\r\n    // Si le client n'est pas null pas besoin de mise a jour\r\n    if (client === null) {\r\n      // Je récupère les données du client grace à l'api\r\n      api.getUserById(id).then(\r\n        (response) => {\r\n          var userEdit = response.data.user\r\n          // Assignation de la valeur \"avatar\" à \"userEdit\"\r\n          Object.assign(userEdit, { avatarLink: `/api/file/get/avatars/` })// https://collaps.xyz/collapsapi/api/file/avatar/id/\r\n          return setClient(userEdit)\r\n      })\r\n    }\r\n  }, [])\r\n\r\n  function updateUser(id, payload) {\r\n    Object.assign(payload, { token })\r\n    api.updateUserById(id, payload)\r\n  }\r\n\r\n  const value = {\r\n    client,\r\n    setClient,\r\n    updateUser\r\n  }\r\n\r\n  return (\r\n    <UserContext.Provider value={value}>\r\n      {children}\r\n    </UserContext.Provider>\r\n  )\r\n}\r\n\r\nexport default UserContext\r\n\r\n// https://dmitripavlutin.com/react-usestate-hook-guide/"]},"metadata":{},"sourceType":"module"}