{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\anton\\\\Desktop\\\\FInt.Tchat\\\\dev\\\\V4\\\\Whatsapp-Clone-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useCallback}from'react';import{useConversations}from'../contexts/ConversationsProvider';export default function OpenConversation(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var setRef=useCallback(function(node){if(node){node.scrollIntoView({smooth:true});}},[]);var _useConversations=useConversations(),sendMessage=_useConversations.sendMessage,selectedConversation=_useConversations.selectedConversation;function handleSubmit(e){e.preventDefault();sendMessage(selectedConversation.recipients.map(function(r){return r.id;}),text);setText('');}var lastSenderNow;return/*#__PURE__*/React.createElement(\"div\",{id:\"message\",className:\"message\"},/*#__PURE__*/React.createElement(\"div\",{className:\"message-header\"},/*#__PURE__*/React.createElement(\"div\",{className:\"message-header-user\"},/*#__PURE__*/React.createElement(\"div\",{className:\"message-header-user-avatar\"},/*#__PURE__*/React.createElement(\"img\",{className:\"avatar\",src:\"https://wir.skyrock.net/wir/v1/profilcrop/?c=mog&w=301&h=301&im=%2Fart%2FPRIP.105317501.2.2.jpg\",alt:\"user profil\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"message-header-user-info\"},/*#__PURE__*/React.createElement(\"div\",{className:\"username\"},selectedConversation.recipients.map(function(r){return r.name;}).join(', ')),/*#__PURE__*/React.createElement(\"div\",{className:\"statut online\"},/*#__PURE__*/React.createElement(\"svg\",{viewBox:\"0 0 512 512\",\"aria-hidden\":\"false\",width:\"10\",height:\"15\",x:\"0\",y:\"0\"},/*#__PURE__*/React.createElement(\"path\",{fill:\"currentColor\",d:\"M256,0C115.39,0,0,115.39,0,256s115.39,256,256,256s256-115.39,256-256S396.61,0,256,0z\"}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"message-header-toolbar\"},/*#__PURE__*/React.createElement(\"button\",{className:\"message-header-toolbar-btn\",type:\"button\",id:\"btnInterlocutorSetting\"},/*#__PURE__*/React.createElement(\"div\",{className:\"message-header-toolbar-btn-icon\"},/*#__PURE__*/React.createElement(\"svg\",{viewBox:\"0 0 515.555 515.555\",\"aria-hidden\":\"false\",width:\"17\",height:\"17\",x:\"0\",y:\"0\"},/*#__PURE__*/React.createElement(\"path\",{fill:\"currentColor\",d:\"m496.679 212.208c25.167 25.167 25.167 65.971 0 91.138s-65.971 25.167-91.138 0-25.167-65.971 0-91.138 65.971-25.167 91.138 0\"}),/*#__PURE__*/React.createElement(\"path\",{fill:\"currentColor\",d:\"m303.347 212.208c25.167 25.167 25.167 65.971 0 91.138s-65.971 25.167-91.138 0-25.167-65.971 0-91.138 65.971-25.167 91.138 0\"}),/*#__PURE__*/React.createElement(\"path\",{fill:\"currentColor\",d:\"m110.014 212.208c25.167 25.167 25.167 65.971 0 91.138s-65.971 25.167-91.138 0-25.167-65.971 0-91.138 65.971-25.167 91.138 0\"})))))),/*#__PURE__*/React.createElement(\"div\",{className:\"message-body scroller\"},selectedConversation.messages.map(function(message,index){var lastMessage=selectedConversation.messages.length-1===index;// Détecte si plus de deux messages a la suite sont du même destinataire\nvar lastSenderPass=lastSenderNow;lastSenderNow=message.sender;return lastSenderNow!==lastSenderPass?/*#__PURE__*/React.createElement(\"div\",{className:\"message-body-message parents\",key:index,ref:lastMessage?setRef:null},/*#__PURE__*/React.createElement(\"div\",{className:\"message-body-message-avatar\"},/*#__PURE__*/React.createElement(\"img\",{className:\"avatar\",src:\"https://wir.skyrock.net/wir/v1/profilcrop/?c=mog&w=301&h=301&im=%2Fart%2FPRIP.105317501.2.2.jpg\",alt:\"user profil\"})),/*#__PURE__*/React.createElement(\"h2\",{className:\"message-body-message-header\"},/*#__PURE__*/React.createElement(\"span\",{className:\"pseudo\"},message.fromMe?'You':message.senderName),/*#__PURE__*/React.createElement(\"span\",{className:\"timestamp\"},\"Date none\")),/*#__PURE__*/React.createElement(\"div\",{className:\"message-body-message-text\"},message.text)):/*#__PURE__*/React.createElement(\"div\",{className:\"message-body-message children\",key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"message-body-message-text\"},message.text));}),/*#__PURE__*/React.createElement(\"div\",{className:\"message-body-spacer\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"message-footer\"},/*#__PURE__*/React.createElement(\"form\",{className:\"message-footer-toolbar\",onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"message-footer-toolbar-uploadBtn\"},/*#__PURE__*/React.createElement(\"svg\",{className:\"icon\",width:\"24\",height:\"24\",viewBox:\"0 0 24 24\"},/*#__PURE__*/React.createElement(\"path\",{fill:\"currentColor\",d:\"M12 2.00098C6.486 2.00098 2 6.48698 2 12.001C2 17.515 6.486 22.001 12 22.001C17.514 22.001 22 17.515 22 12.001C22 6.48698 17.514 2.00098 12 2.00098ZM17 13.001H13V17.001H11V13.001H7V11.001H11V7.00098H13V11.001H17V13.001Z\"})),/*#__PURE__*/React.createElement(\"input\",{className:\"input\",type:\"file\",multiple:true})),/*#__PURE__*/React.createElement(\"textarea\",{className:\"message-footer-toolbar-textarea scroller\",placeholder:\"Envoyer un message \\xE0 pseudo\",spellcheck:\"true\",autofocus:true,autocomplete:\"off\",value:text,onChange:function onChange(e){return setText(e.target.value);},required:true}),/*#__PURE__*/React.createElement(\"button\",{className:\"message-footer-toolbar-sendBtn\",type:\"submit\"},/*#__PURE__*/React.createElement(\"svg\",{viewBox:\"0 0 512 512\",\"aria-hidden\":\"false\",width:\"20\",height:\"20\"},/*#__PURE__*/React.createElement(\"path\",{fill:\"currentColor\",d:\"M481.508,210.336L68.414,38.926c-17.403-7.222-37.064-4.045-51.309,8.287C2.86,59.547-3.098,78.551,1.558,96.808 L38.327,241h180.026c8.284,0,15.001,6.716,15.001,15.001c0,8.284-6.716,15.001-15.001,15.001H38.327L1.558,415.193 c-4.656,18.258,1.301,37.262,15.547,49.595c14.274,12.357,33.937,15.495,51.31,8.287l413.094-171.409 C500.317,293.862,512,276.364,512,256.001C512,235.638,500.317,218.139,481.508,210.336z\"}))))));}","map":{"version":3,"sources":["C:/Users/anton/Desktop/FInt.Tchat/dev/V4/Whatsapp-Clone-master/client/src/components/OpenConversation.js"],"names":["React","useState","useCallback","useConversations","OpenConversation","text","setText","setRef","node","scrollIntoView","smooth","sendMessage","selectedConversation","handleSubmit","e","preventDefault","recipients","map","r","id","lastSenderNow","name","join","messages","message","index","lastMessage","length","lastSenderPass","sender","fromMe","senderName","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useCallback } from 'react'\nimport { useConversations } from '../contexts/ConversationsProvider';\n\nexport default function OpenConversation() {\n  const [text, setText] = useState('')\n\n  const setRef = useCallback(node => {\n    if (node) {\n      node.scrollIntoView({ smooth: true })\n    }\n  }, [])\n\n  const { sendMessage, selectedConversation } = useConversations()\n\n  function handleSubmit(e) {\n    e.preventDefault()\n\n    sendMessage(\n      selectedConversation.recipients.map(r => r.id),\n      text\n    )\n    setText('')\n  }\n\n  var lastSenderNow;\n\n  return (\n    <div id=\"message\" className=\"message\">\n      <div className=\"message-header\">\n        <div className=\"message-header-user\">\n          <div className=\"message-header-user-avatar\">\n            <img className=\"avatar\"\n              src=\"https://wir.skyrock.net/wir/v1/profilcrop/?c=mog&w=301&h=301&im=%2Fart%2FPRIP.105317501.2.2.jpg\"\n              alt=\"user profil\" />\n          </div>\n          <div className=\"message-header-user-info\">\n            <div className=\"username\">\n              {selectedConversation.recipients.map(r => r.name).join(', ')}\n            </div>\n            <div className=\"statut online\">\n              <svg viewBox=\"0 0 512 512\" aria-hidden=\"false\" width=\"10\" height=\"15\" x=\"0\" y=\"0\">\n                <path fill=\"currentColor\"\n                  d=\"M256,0C115.39,0,0,115.39,0,256s115.39,256,256,256s256-115.39,256-256S396.61,0,256,0z\" />\n              </svg>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"message-header-toolbar\">\n          <button className=\"message-header-toolbar-btn\" type=\"button\" id=\"btnInterlocutorSetting\">\n            <div className=\"message-header-toolbar-btn-icon\">\n\n              <svg viewBox=\"0 0 515.555 515.555\" aria-hidden=\"false\" width=\"17\" height=\"17\" x=\"0\" y=\"0\">\n                <path fill=\"currentColor\"\n                  d=\"m496.679 212.208c25.167 25.167 25.167 65.971 0 91.138s-65.971 25.167-91.138 0-25.167-65.971 0-91.138 65.971-25.167 91.138 0\" />\n                <path fill=\"currentColor\"\n                  d=\"m303.347 212.208c25.167 25.167 25.167 65.971 0 91.138s-65.971 25.167-91.138 0-25.167-65.971 0-91.138 65.971-25.167 91.138 0\" />\n                <path fill=\"currentColor\"\n                  d=\"m110.014 212.208c25.167 25.167 25.167 65.971 0 91.138s-65.971 25.167-91.138 0-25.167-65.971 0-91.138 65.971-25.167 91.138 0\" />\n              </svg>\n\n            </div>\n          </button>\n        </div>\n      </div>\n      <div className=\"message-body scroller\">\n        {\n          selectedConversation.messages.map((message, index) => {\n            const lastMessage = selectedConversation.messages.length - 1 === index\n\n            // Détecte si plus de deux messages a la suite sont du même destinataire\n            var lastSenderPass = lastSenderNow;\n            lastSenderNow = message.sender;\n\n            return (\n              lastSenderNow !== lastSenderPass\n                ?\n                <div\n                  className=\"message-body-message parents\"\n                  key={index}\n                  ref={lastMessage ? setRef : null}\n                >\n                  <div className=\"message-body-message-avatar\">\n                    <img className=\"avatar\"\n                      src=\"https://wir.skyrock.net/wir/v1/profilcrop/?c=mog&w=301&h=301&im=%2Fart%2FPRIP.105317501.2.2.jpg\"\n                      alt=\"user profil\" />\n                  </div>\n                  <h2 className=\"message-body-message-header\">\n                    <span className=\"pseudo\">\n                      {message.fromMe ? 'You' : message.senderName}\n                    </span>\n                    <span className=\"timestamp\">\n                      Date none\n                        </span>\n                  </h2>\n                  <div className=\"message-body-message-text\">\n                    {message.text}\n                  </div>\n                </div>\n                :\n                <div\n                  className=\"message-body-message children\"\n                  key={index}\n                >\n                  <div className=\"message-body-message-text\">\n                    {message.text}\n                  </div>\n                </div>\n            )\n          })\n        }\n\n        <div className=\"message-body-spacer\"></div>\n      </div>\n      <div className=\"message-footer\">\n        <form className=\"message-footer-toolbar\" onSubmit={handleSubmit}>\n\n          <div className=\"message-footer-toolbar-uploadBtn\">\n            <svg className=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n              <path fill=\"currentColor\" d=\"M12 2.00098C6.486 2.00098 2 6.48698 2 12.001C2 17.515 6.486 22.001 12 22.001C17.514 22.001 22 17.515 22 12.001C22\n                    6.48698 17.514 2.00098 12 2.00098ZM17 13.001H13V17.001H11V13.001H7V11.001H11V7.00098H13V11.001H17V13.001Z\">\n              </path>\n            </svg>\n            <input className=\"input\" type=\"file\" multiple />\n          </div>\n\n          <textarea className=\"message-footer-toolbar-textarea scroller\" placeholder=\"Envoyer un message à pseudo\"\n            spellcheck=\"true\" autofocus autocomplete=\"off\"\n            value={text}\n            onChange={e => setText(e.target.value)}\n            required\n          ></textarea>\n\n          <button className=\"message-footer-toolbar-sendBtn\" type=\"submit\">\n            <svg viewBox=\"0 0 512 512\" aria-hidden=\"false\" width=\"20\" height=\"20\">\n              <path fill=\"currentColor\" d=\"M481.508,210.336L68.414,38.926c-17.403-7.222-37.064-4.045-51.309,8.287C2.86,59.547-3.098,78.551,1.558,96.808\n                  L38.327,241h180.026c8.284,0,15.001,6.716,15.001,15.001c0,8.284-6.716,15.001-15.001,15.001H38.327L1.558,415.193\n                  c-4.656,18.258,1.301,37.262,15.547,49.595c14.274,12.357,33.937,15.495,51.31,8.287l413.094-171.409\n                  C500.317,293.862,512,276.364,512,256.001C512,235.638,500.317,218.139,481.508,210.336z\" />\n            </svg>\n          </button>\n\n        </form>\n      </div>\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}