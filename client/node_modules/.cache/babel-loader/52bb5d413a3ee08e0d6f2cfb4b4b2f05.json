{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\anton\\\\Desktop\\\\collaps-chat\\\\dev\\\\Beta\\\\V1\\\\client\\\\src\\\\components\\\\container\\\\OpenConversation.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport api from '../../api';\nimport { useUser } from '../../contexts/UserProvider';\nimport { useChannels } from '../../contexts/ChannelsProvider';\nexport default function OpenConversation({\n  storageLocal\n}) {\n  const {\n    client,\n    updateUser\n  } = useUser();\n  const {\n    setChannels,\n    selectedChannel,\n    setSelectedChannel,\n    messagesChannels,\n    sendMessage\n  } = useChannels(); // Ce \"state\" enregistre le texte du message\n\n  const [textInput, setTextInput] = useState(''); // Ce \"ref\" enregistre le fichier du message\n\n  const [fileInput, setFilesInput] = useState(null); // Fonction appelée pour supprimer le \"channel\" selectionné, dans les données du client est dans celle du destinataire\n\n  function handleDelChannel() {\n    // J'isole les données du client dans une variable pour pouvoir les modifier\n    var userClientEdit = client; // Je boucle tous les \"channels\" du client\n\n    for (let i = 0; i < userClientEdit.channels.length; i++) {\n      // Je teste si l'id du \"channel\" sélectionné correspond à l'id du \"channel\" passé dans la boucle\n      if (userClientEdit.channels[i].id === selectedChannel.id) {\n        // Je supprime le channel dans la liste grace à sa position\n        userClientEdit.channels.splice(i, 1); // Je mets à jour le client\n\n        api.updateUserById(userClientEdit.id, {\n          channels: userClientEdit.channels\n        }).then(res => {});\n      }\n    } // Récupération des données du destinataire avec son id\n\n\n    api.getUserById(selectedChannel.recipients[0].id).then(userRecipient => {\n      console.log(userRecipient.data); // J'isole les données du destinataire dans une variable pour pouvoir les modifier\n\n      var userRecipientEdit = userRecipient.data.user; // Je boucle tous les \"channels\" du destinataire\n\n      for (let i = 0; i < userRecipientEdit.channels.length; i++) {\n        // Je teste si l'id du \"channel\" sélectionné correspond à l'id du \"channel\" passé dans la boucle\n        if (userRecipientEdit.channels[i].id === selectedChannel.id) {\n          // Je supprime le channel dans la liste grace à sa position\n          userRecipientEdit.channels.splice(i, 1); // Je mets à jour le destinataire\n\n          updateUser(userRecipientEdit.id, {\n            channels: userRecipientEdit.channels\n          });\n        }\n      }\n    }, error => {\n      console.log(error);\n    }); // Supresion du \"channel\" dans \"setChannels\"\n\n    setChannels(channels => [...channels.slice(0, selectedChannel.key), ...channels.slice(selectedChannel.key + 1)]); // Je reset le \"setSelectedChannel\"\n\n    setSelectedChannel(null); // Je supprime le channel\n\n    api.deleteChannelById(selectedChannel.id);\n  }\n\n  function handleAddInputFile() {\n    let input = document.createElement('input');\n    input.type = 'file';\n\n    input.onchange = _ => {\n      setFilesInput(input.files);\n    };\n\n    input.click();\n  }\n\n  function handleDeleteInputFile() {\n    setFilesInput(null);\n  } // Fonction appelée pour envoyé un message\n\n\n  function handleSendMsg(e) {\n    e.preventDefault();\n    var fileId = null;\n\n    if (fileInput !== null) {\n      fileId = (Math.floor(Math.random() * 10000000) + 99999999).toString(); // FormData permet de stocker plusieur fichiers à la fois\n\n      const file = new FormData(); // Ajoute le fichier au \"formData\" avec la fonction \"append\"\n\n      file.append('files', fileInput[0]);\n      api.uploadFileMsg(storageLocal.id, storageLocal.token, fileId, file) //file\n      .then(res => {\n        console.log(res);\n        console.log('Upload Success');\n      }).catch(err => {\n        console.log(err);\n        console.log('Upload Error');\n      });\n    } // channel, text, client\n\n\n    sendMessage(selectedChannel, textInput, fileId, client); // Reset de \"setTextInput\"\n\n    setTextInput('');\n    setFilesInput(null);\n  } // Ce script redimensionne le 'textarea' en prenant en compte la taille de l'affichage\n\n\n  useEffect(() => {\n    try {\n      // [ Responsive Textarea size ]\n      // Je définis la taille maximale du textarea\n      var msgTextarea = document.getElementById('msgTextarea');\n\n      if (window.screen.height >= 1000) {\n        msgTextarea.style.maxHeight = \"330px\"; //44px = 2 ligne\n      } else if (window.screen.height >= 900) {\n        msgTextarea.style.maxHeight = \"286px\";\n      } else if (window.screen.height >= 800) {\n        msgTextarea.style.maxHeight = \"242px\";\n      } else if (window.screen.height >= 700) {\n        msgTextarea.style.maxHeight = \"198px\";\n      } else if (window.screen.height >= 600) {\n        msgTextarea.style.maxHeight = \"154px\";\n      } else if (window.screen.height >= 500) {\n        msgTextarea.style.maxHeight = \"110px\";\n      } // Redimensionnement automatique\n\n\n      msgTextarea.addEventListener('input', function (event) {\n        var el = this;\n        el.style.height = '22px';\n        el.style.height = el.scrollHeight - 22 + 'px';\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  }, []); // Met le scroll de \"messageBodyScroll\" en bas dès qu'un \"channel\" est sélectionné\n\n  useEffect(() => {\n    var scrollarea = document.getElementById('messageBodyScroll');\n    scrollarea.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, [selectedChannel]); //  Met le scroll de \"messageBodyScroll\" en bas dès qu'un message et envoyé ou reçu\n\n  useEffect(() => {\n    var scrollarea = document.getElementById('messageBodyScroll');\n\n    const scrollToBottom = node => {\n      node.scrollTop = node.scrollHeight;\n    };\n\n    scrollToBottom(scrollarea);\n  }, [messagesChannels]);\n  var lastSenderNow;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"message\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"message-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"message-header-user\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"message-header-user-avatar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"avatar\",\n    src: `${client.avatar_url}${selectedChannel.recipients[0].id}`,\n    alt: \"user profil\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"message-header-user-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"username\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 13\n    }\n  }, selectedChannel.recipients[0].pseudo), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"statut online\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    viewBox: \"0 0 512 512\",\n    \"aria-hidden\": \"false\",\n    width: \"10\",\n    height: \"15\",\n    x: \"0\",\n    y: \"0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M256,0C115.39,0,0,115.39,0,256s115.39,256,256,256s256-115.39,256-256S396.61,0,256,0z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 17\n    }\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"message-header-toolbar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn-icon-small-red\",\n    type: \"button\",\n    onClick: handleDelChannel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    viewBox: \"0 0 512 512\",\n    \"aria-hidden\": \"false\",\n    width: \"20\",\n    height: \"20\",\n    x: \"0\",\n    y: \"0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"polygon\", {\n    fill: \"currentColor\",\n    points: \"512,338.954 483.732,310.686 411.772,382.646 339.812,310.686 311.543,338.954 383.503,410.914 311.543,482.874  339.812,511.142 411.772,439.182 483.732,511.142 512,482.874 440.04,410.914 \\t\\t\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M255.858,0.142c-81.562,0-147.918,66.356-147.918,147.918c0,50.52,25.465,95.198,64.226,121.894 c-36.19,12.488-69.36,33.118-97.227,60.984C26.614,379.265,0,443.516,0,511.858h39.978c0-119.037,96.843-215.88,215.88-215.88 c81.562,0,147.918-66.355,147.918-147.918C403.776,66.498,337.42,0.142,255.858,0.142z M255.858,256 c-59.518,0-107.94-48.421-107.94-107.94S196.34,40.12,255.858,40.12c59.518,0,107.94,48.421,107.94,107.94 S315.376,256,255.858,256z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 15\n    }\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"message-body scroller\",\n    id: \"messageBodyScroll\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }\n  }, selectedChannel.messages.map((message, index) => {\n    // Trensforme la date du format texte au format js\n    var date = new Date(message.date); // Mise en forme de la date\n\n    date = `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()} ${date.getHours()}:${date.getMinutes()}`;\n    const pseudo = client === null ? null : message.sender === client.id ? client.pseudo : selectedChannel.recipients.find(recipient => recipient.id === message.sender).pseudo; // Détecte si plus de deux messages a la suite sont du même destinataire\n\n    var lastSenderPass = lastSenderNow;\n    lastSenderNow = message.sender;\n    return lastSenderNow !== lastSenderPass ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"message-body-message parents\",\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"message-body-message-avatar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"avatar\",\n      src: client == null ? null : message.sender.id === client.id ? `${client.avatar_url}${client.id}` : `${client.avatar_url}${message.sender}`,\n      alt: \"user profil\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"message-body-message-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"pseudo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 21\n      }\n    }, pseudo), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"timestamp\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 21\n      }\n    }, date)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"message-body-message-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 19\n      }\n    }, message.text)) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"message-body-message children\",\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      onClick: handleOpenFile,\n      className: \"message-body-message-file\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      className: \"icon\",\n      viewBox: \"0 0 512 512\",\n      width: \"24\",\n      height: \"24\",\n      x: \"0\",\n      y: \"0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"g\", {\n      fill: \"currentColor\",\n      stroke: \"none\",\n      transform: \"translate(0.000000,512.000000) scale(0.100000,-0.100000)\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"path\", {\n      d: \"M1150 4671 c-30 -9 -73 -29 -95 -43 -53 -33 -128 -115 -155 -168 -51 -100 -50 -48 -50 -1900 0 -1853 -1 -1800 50 -1901 28 -54 111 -142 164 -173 101 -59 25 -57 1517 -54 l1364 3 58 23 c72 29 172 120 210 191 58 106 57 70 57 1496 0 794 -4 1333 -10 1369 -5 32 -23 88 -40 125 -28 61 -69 104 -488 522 -422 422 -462 459 -527 490 l-70 34 -965 2 c-901 2 -969 1 -1020 -16z m1928 -315 c15 -8 215 -203 444 -433 360 -362 417 -423 423 -455 4 -20 4 -41 0 -47 -4 -7 -96 -11 -278 -11 -291 0 -366 9 -448 50 -54 28 -142 111 -173 164 -51 88 -56 126 -56 448 l0 298 30 0 c17 0 43 -6 58 -14z m419 -1662 c98 -73 98 -195 0 -268 -28 -21 -31 -21 -937 -21 -906 0 -909 0 -937 21 -89 66 -99 179 -21 251 12 12 34 26 48 32 16 6 340 9 922 8 893 -2 897 -2 925 -23z m0 -640 c98 -73 98 -195 0 -268 -28 -21 -31 -21 -937 -21 -906 0 -909 0 -937 21 -89 66 -99 179 -21 251 12 12 34 26 48 32 16 6 340 9 922 8 893 -2 897 -2 925 -23z m0 -640 c98 -73 98 -195 0 -268 -28 -21 -31 -21 -937 -21 -906 0 -909 0 -937 21 -89 66 -99 179 -21 251 12 12 34 26 48 32 16 6 340 9 922 8 893 -2 897 -2 925 -23z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"title\",\n      target: \"_blank\",\n      href: `http://localhost:3000/api/file/get/files/${message.file}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 21\n      }\n    }, \"Ouvrir\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"message-body-message-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 19\n      }\n    }, message.file == null ? null : /*#__PURE__*/React.createElement(\"a\", {\n      target: \"_blank\",\n      href: `http://localhost:3000/api/file/get/files/${message.file}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 52\n      }\n    }, \"File \"), message.text));\n  }), messagesChannels.length === 0 ? null : messagesChannels.find(messagesChannel => messagesChannel.id === selectedChannel.id).messages.map((message, index) => {\n    // Trensforme la date du format texte au format js\n    var date = new Date(message.date); // Mise en forme de la date\n\n    date = `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()} ${date.getHours()}:${date.getMinutes()}`; // Détecte si plus de deux messages a la suite sont du même destinataire\n\n    var lastSenderPass = lastSenderNow;\n    lastSenderNow = message.sender.id;\n    return lastSenderNow !== lastSenderPass ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"message-body-message parents\",\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"message-body-message-avatar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"avatar\",\n      src: client == null ? null : message.sender.id === client.id ? `${client.avatar_url}${client.id}` : `${client.avatar_url}${message.sender.id}`,\n      alt: \"user profil\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"message-body-message-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"pseudo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 21\n      }\n    }, message.sender.pseudo), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"timestamp\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 21\n      }\n    }, date)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"message-body-message-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 19\n      }\n    }, message.text)) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"message-body-message children\",\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"message-body-message-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 19\n      }\n    }, message.file == null ? null : /*#__PURE__*/React.createElement(\"a\", {\n      target: \"_blank\",\n      href: `http://localhost:3000/api/file/get/files/${message.file}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 52\n      }\n    }, \"File \"), message.text));\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"message-body-spacer\",\n    id: \"spacer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"message-footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"message-footer-toolbar\",\n    onSubmit: handleSendMsg,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"message-footer-toolbar-uploadBtn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    onClick: handleAddInputFile,\n    className: \"iconAdd\",\n    width: \"24\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M12 2.00098C6.486 2.00098 2 6.48698 2 12.001C2 17.515 6.486 22.001 12 22.001C17.514 22.001 22 17.515 22 12.001C22 6.48698 17.514 2.00098 12 2.00098ZM17 13.001H13V17.001H11V13.001H7V11.001H11V7.00098H13V11.001H17V13.001Z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 15\n    }\n  })), fileInput == null ? null : /*#__PURE__*/React.createElement(\"svg\", {\n    onClick: handleDeleteInputFile,\n    className: \"iconDelete\",\n    viewBox: \"0 0 512 512\",\n    width: \"24\",\n    height: \"24\",\n    x: \"0\",\n    y: \"0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    fill: \"currentColor\",\n    stroke: \"none\",\n    transform: \"translate(0.000000,512.000000) scale(0.100000,-0.100000)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1150 4671 c-30 -9 -73 -29 -95 -43 -53 -33 -128 -115 -155 -168 -51 -100 -50 -48 -50 -1900 0 -1853 -1 -1800 50 -1901 28 -54 111 -142 164 -173 101 -59 25 -57 1517 -54 l1364 3 58 23 c72 29 172 120 210 191 58 106 57 70 57 1496 0 794 -4 1333 -10 1369 -5 32 -23 88 -40 125 -28 61 -69 104 -488 522 -422 422 -462 459 -527 490 l-70 34 -965 2 c-901 2 -969 1 -1020 -16z m1928 -315 c15 -8 215 -203 444 -433 360 -362 417 -423 423 -455 4 -20 4 -41 0 -47 -4 -7 -96 -11 -278 -11 -291 0 -366 9 -448 50 -54 28 -142 111 -173 164 -51 88 -56 126 -56 448 l0 298 30 0 c17 0 43 -6 58 -14z m-960 -1712 c23 -9 111 -89 239 -217 l203 -201 207 206 c228 225 241 233 344 226 110 -8 189 -93 189 -205 0 -29 -7 -70 -15 -90 -10 -22 -93 -114 -217 -240 l-202 -203 201 -203 c212 -213 243 -254 243 -332 0 -42 -29 -116 -58 -149 -26 -30 -113 -66 -157 -66 -78 1 -119 31 -332 243 l-203 201 -203 -202 c-126 -124 -218 -207 -240 -217 -20 -8 -61 -15 -90 -15 -112 0 -197 79 -205 189 -7 103 1 116 226 344 l206 207 -206 208 c-225 227 -233 240 -226 343 10 142 160 230 296 173z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 21\n    }\n  })))), /*#__PURE__*/React.createElement(\"textarea\", {\n    id: \"msgTextarea\",\n    className: \"message-footer-toolbar-textarea scroller\",\n    placeholder: \"Envoyer un message à \" + selectedChannel.recipients[0].pseudo,\n    spellCheck: \"true\",\n    autoFocus: true,\n    autoComplete: \"off\",\n    value: textInput,\n    onChange: e => setTextInput(e.target.value),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"message-footer-toolbar-sendBtn\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    viewBox: \"0 0 512 512\",\n    \"aria-hidden\": \"false\",\n    width: \"20\",\n    height: \"20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M481.508,210.336L68.414,38.926c-17.403-7.222-37.064-4.045-51.309,8.287C2.86,59.547-3.098,78.551,1.558,96.808 L38.327,241h180.026c8.284,0,15.001,6.716,15.001,15.001c0,8.284-6.716,15.001-15.001,15.001H38.327L1.558,415.193 c-4.656,18.258,1.301,37.262,15.547,49.595c14.274,12.357,33.937,15.495,51.31,8.287l413.094-171.409 C500.317,293.862,512,276.364,512,256.001C512,235.638,500.317,218.139,481.508,210.336z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 15\n    }\n  }))))));\n}","map":{"version":3,"sources":["C:/Users/anton/Desktop/collaps-chat/dev/Beta/V1/client/src/components/container/OpenConversation.js"],"names":["React","useState","useEffect","useRef","api","useUser","useChannels","OpenConversation","storageLocal","client","updateUser","setChannels","selectedChannel","setSelectedChannel","messagesChannels","sendMessage","textInput","setTextInput","fileInput","setFilesInput","handleDelChannel","userClientEdit","i","channels","length","id","splice","updateUserById","then","res","getUserById","recipients","userRecipient","console","log","data","userRecipientEdit","user","error","slice","key","deleteChannelById","handleAddInputFile","input","document","createElement","type","onchange","_","files","click","handleDeleteInputFile","handleSendMsg","e","preventDefault","fileId","Math","floor","random","toString","file","FormData","append","uploadFileMsg","token","catch","err","msgTextarea","getElementById","window","screen","height","style","maxHeight","addEventListener","event","el","scrollHeight","scrollarea","scrollIntoView","behavior","scrollToBottom","node","scrollTop","lastSenderNow","avatar_url","pseudo","messages","map","message","index","date","Date","getDate","getMonth","getFullYear","getHours","getMinutes","sender","find","recipient","lastSenderPass","text","handleOpenFile","messagesChannel","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react'\n\nimport api from '../../api'\n\nimport { useUser } from '../../contexts/UserProvider';\nimport { useChannels } from '../../contexts/ChannelsProvider';\n\nexport default function OpenConversation({ storageLocal }) {\n  const { client, updateUser } = useUser()\n  const { setChannels, selectedChannel, setSelectedChannel, messagesChannels, sendMessage } = useChannels()\n\n  // Ce \"state\" enregistre le texte du message\n  const [textInput, setTextInput] = useState('')\n  // Ce \"ref\" enregistre le fichier du message\n  const [fileInput, setFilesInput] = useState(null)\n\n  // Fonction appelée pour supprimer le \"channel\" selectionné, dans les données du client est dans celle du destinataire\n  function handleDelChannel() {\n\n    // J'isole les données du client dans une variable pour pouvoir les modifier\n    var userClientEdit = client\n\n    // Je boucle tous les \"channels\" du client\n    for (let i = 0; i < userClientEdit.channels.length; i++) {\n      // Je teste si l'id du \"channel\" sélectionné correspond à l'id du \"channel\" passé dans la boucle\n      if (userClientEdit.channels[i].id === selectedChannel.id) {\n        // Je supprime le channel dans la liste grace à sa position\n        userClientEdit.channels.splice(i, 1);\n        // Je mets à jour le client\n        api.updateUserById(userClientEdit.id, { channels: userClientEdit.channels }).then(res => { })\n      }\n    }\n\n    // Récupération des données du destinataire avec son id\n    api.getUserById(selectedChannel.recipients[0].id).then(\n      (userRecipient) => {\n        console.log(userRecipient.data)\n        // J'isole les données du destinataire dans une variable pour pouvoir les modifier\n        var userRecipientEdit = userRecipient.data.user\n\n        // Je boucle tous les \"channels\" du destinataire\n        for (let i = 0; i < userRecipientEdit.channels.length; i++) {\n          // Je teste si l'id du \"channel\" sélectionné correspond à l'id du \"channel\" passé dans la boucle\n          if (userRecipientEdit.channels[i].id === selectedChannel.id) {\n            // Je supprime le channel dans la liste grace à sa position\n            userRecipientEdit.channels.splice(i, 1);\n            // Je mets à jour le destinataire\n            updateUser(userRecipientEdit.id, { channels: userRecipientEdit.channels })\n          }\n        }\n\n      },\n      (error) => {\n        console.log(error)\n      }\n    )\n    // Supresion du \"channel\" dans \"setChannels\"\n    setChannels(channels => [\n      ...channels.slice(0, selectedChannel.key),\n      ...channels.slice(selectedChannel.key + 1)\n    ]);\n    // Je reset le \"setSelectedChannel\"\n    setSelectedChannel(null)\n    // Je supprime le channel\n    api.deleteChannelById(selectedChannel.id)\n  }\n\n  function handleAddInputFile() {\n    let input = document.createElement('input');\n    input.type = 'file';\n    input.onchange = _ => {\n      setFilesInput(input.files)\n    };\n    input.click();\n\n  }\n\n  function handleDeleteInputFile() {\n    setFilesInput(null)\n  }\n\n  // Fonction appelée pour envoyé un message\n  function handleSendMsg(e) {\n    e.preventDefault()\n    var fileId = null\n    if (fileInput !== null) {\n      fileId = (Math.floor(Math.random() * 10000000) + 99999999).toString();\n      // FormData permet de stocker plusieur fichiers à la fois\n      const file = new FormData();\n      // Ajoute le fichier au \"formData\" avec la fonction \"append\"\n      file.append('files', fileInput[0]);\n      api.uploadFileMsg(storageLocal.id, storageLocal.token, fileId, file)//file\n        .then((res) => {\n          console.log(res)\n          console.log('Upload Success')\n        })\n        .catch((err) => {\n          console.log(err)\n          console.log('Upload Error')\n        })\n    }\n\n    // channel, text, client\n    sendMessage(\n      selectedChannel,\n      textInput,\n      fileId,\n      client\n    )\n\n    // Reset de \"setTextInput\"\n    setTextInput('')\n    setFilesInput(null)\n  }\n\n  // Ce script redimensionne le 'textarea' en prenant en compte la taille de l'affichage\n  useEffect(() => {\n    try {\n      // [ Responsive Textarea size ]\n      // Je définis la taille maximale du textarea\n      var msgTextarea = document.getElementById('msgTextarea');\n      if (window.screen.height >= 1000) {\n        msgTextarea.style.maxHeight = \"330px\"//44px = 2 ligne\n      } else if (window.screen.height >= 900) {\n        msgTextarea.style.maxHeight = \"286px\"\n      } else if (window.screen.height >= 800) {\n        msgTextarea.style.maxHeight = \"242px\"\n      } else if (window.screen.height >= 700) {\n        msgTextarea.style.maxHeight = \"198px\"\n      } else if (window.screen.height >= 600) {\n        msgTextarea.style.maxHeight = \"154px\"\n      } else if (window.screen.height >= 500) {\n        msgTextarea.style.maxHeight = \"110px\"\n      }\n      // Redimensionnement automatique\n      msgTextarea.addEventListener('input', function (event) {\n        var el = this;\n        el.style.height = '22px';\n        el.style.height = (el.scrollHeight - 22) + 'px';\n      });\n    } catch (error) {\n      console.error(error)\n    }\n  }, []);\n\n  // Met le scroll de \"messageBodyScroll\" en bas dès qu'un \"channel\" est sélectionné\n  useEffect(() => {\n    var scrollarea = document.getElementById('messageBodyScroll');\n    scrollarea.scrollIntoView({ behavior: \"smooth\" })\n  }, [selectedChannel]);\n\n  //  Met le scroll de \"messageBodyScroll\" en bas dès qu'un message et envoyé ou reçu\n  useEffect(() => {\n    var scrollarea = document.getElementById('messageBodyScroll');\n    const scrollToBottom = (node) => {\n      node.scrollTop = node.scrollHeight;\n    }\n    scrollToBottom(scrollarea);\n  }, [messagesChannels]);\n\n  var lastSenderNow;\n\n  return (\n    <div className=\"message\">\n      <div className=\"message-header\">\n        <div className=\"message-header-user\">\n          <div className=\"message-header-user-avatar\">\n            <img className=\"avatar\"\n              src={`${client.avatar_url}${selectedChannel.recipients[0].id}`}\n              alt=\"user profil\" />\n          </div>\n          <div className=\"message-header-user-info\">\n            <div className=\"username\">\n              {selectedChannel.recipients[0].pseudo}\n            </div>\n            <div className=\"statut online\">\n              <svg viewBox=\"0 0 512 512\" aria-hidden=\"false\" width=\"10\" height=\"15\" x=\"0\" y=\"0\">\n                <path fill=\"currentColor\"\n                  d=\"M256,0C115.39,0,0,115.39,0,256s115.39,256,256,256s256-115.39,256-256S396.61,0,256,0z\" />\n              </svg>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"message-header-toolbar\">\n          <button className=\"btn-icon-small-red\" type=\"button\" onClick={handleDelChannel}>\n            <svg viewBox=\"0 0 512 512\" aria-hidden=\"false\" width=\"20\" height=\"20\" x=\"0\" y=\"0\">\n              <polygon fill=\"currentColor\" points=\"512,338.954 483.732,310.686 411.772,382.646 339.812,310.686 311.543,338.954 383.503,410.914 311.543,482.874 \n              339.812,511.142 411.772,439.182 483.732,511.142 512,482.874 440.04,410.914 \t\t\"/>\n              <path fill=\"currentColor\" d=\"M255.858,0.142c-81.562,0-147.918,66.356-147.918,147.918c0,50.52,25.465,95.198,64.226,121.894\n              c-36.19,12.488-69.36,33.118-97.227,60.984C26.614,379.265,0,443.516,0,511.858h39.978c0-119.037,96.843-215.88,215.88-215.88\n              c81.562,0,147.918-66.355,147.918-147.918C403.776,66.498,337.42,0.142,255.858,0.142z M255.858,256\n              c-59.518,0-107.94-48.421-107.94-107.94S196.34,40.12,255.858,40.12c59.518,0,107.94,48.421,107.94,107.94\n              S315.376,256,255.858,256z\"/>\n            </svg>\n          </button>\n        </div>\n      </div>\n      <div className=\"message-body scroller\" id=\"messageBodyScroll\">\n        {\n          selectedChannel.messages.map((message, index) => {\n            // Trensforme la date du format texte au format js\n            var date = new Date(message.date);\n            // Mise en forme de la date\n            date = `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()} ${date.getHours()}:${date.getMinutes()}`\n\n            const pseudo = client === null ? null : message.sender === client.id ? client.pseudo : selectedChannel.recipients.find(recipient => recipient.id === message.sender).pseudo\n\n            // Détecte si plus de deux messages a la suite sont du même destinataire\n            var lastSenderPass = lastSenderNow;\n            lastSenderNow = message.sender;\n\n            return (\n              lastSenderNow !== lastSenderPass\n                ?\n                <div\n                  className=\"message-body-message parents\"\n                  key={index}\n                >\n                  <div className=\"message-body-message-avatar\">\n                    <img className=\"avatar\"\n                      src={client == null ? null : message.sender.id === client.id ? `${client.avatar_url}${client.id}` : `${client.avatar_url}${message.sender}`}\n                      alt=\"user profil\" />\n                  </div>\n                  <h2 className=\"message-body-message-header\">\n                    <span className=\"pseudo\">\n                      {pseudo}\n                    </span>\n                    <span className=\"timestamp\">\n                      {date}\n                    </span>\n                  </h2>\n                  <div className=\"message-body-message-text\">\n                    {message.text}\n                  </div>\n                </div>\n                :\n                <div\n                  className=\"message-body-message children\"\n                  key={index}\n                >\n                  <div onClick={handleOpenFile} className=\"message-body-message-file\">\n                    <svg className=\"icon\" viewBox=\"0 0 512 512\" width=\"24\" height=\"24\" x=\"0\" y=\"0\">\n                      <g fill=\"currentColor\" stroke=\"none\" transform=\"translate(0.000000,512.000000) scale(0.100000,-0.100000)\">\n                        <path d=\"M1150 4671 c-30 -9 -73 -29 -95 -43 -53 -33 -128 -115 -155 -168 -51\n                        -100 -50 -48 -50 -1900 0 -1853 -1 -1800 50 -1901 28 -54 111 -142 164 -173\n                        101 -59 25 -57 1517 -54 l1364 3 58 23 c72 29 172 120 210 191 58 106 57 70\n                        57 1496 0 794 -4 1333 -10 1369 -5 32 -23 88 -40 125 -28 61 -69 104 -488 522\n                        -422 422 -462 459 -527 490 l-70 34 -965 2 c-901 2 -969 1 -1020 -16z m1928\n                        -315 c15 -8 215 -203 444 -433 360 -362 417 -423 423 -455 4 -20 4 -41 0 -47\n                        -4 -7 -96 -11 -278 -11 -291 0 -366 9 -448 50 -54 28 -142 111 -173 164 -51\n                        88 -56 126 -56 448 l0 298 30 0 c17 0 43 -6 58 -14z m419 -1662 c98 -73 98\n                        -195 0 -268 -28 -21 -31 -21 -937 -21 -906 0 -909 0 -937 21 -89 66 -99 179\n                        -21 251 12 12 34 26 48 32 16 6 340 9 922 8 893 -2 897 -2 925 -23z m0 -640\n                        c98 -73 98 -195 0 -268 -28 -21 -31 -21 -937 -21 -906 0 -909 0 -937 21 -89\n                        66 -99 179 -21 251 12 12 34 26 48 32 16 6 340 9 922 8 893 -2 897 -2 925 -23z\n                        m0 -640 c98 -73 98 -195 0 -268 -28 -21 -31 -21 -937 -21 -906 0 -909 0 -937\n                        21 -89 66 -99 179 -21 251 12 12 34 26 48 32 16 6 340 9 922 8 893 -2 897 -2\n                        925 -23z\"/>\n                      </g>\n                    </svg>\n                    <div className=\"title\" target=\"_blank\" href={`http://localhost:3000/api/file/get/files/${message.file}`}>\n                      Ouvrir\n                    </div>\n                  </div>\n                  <div className=\"message-body-message-text\">\n                    {message.file == null ? null : <a target=\"_blank\" href={`http://localhost:3000/api/file/get/files/${message.file}`}>File </a> }\n                    {message.text}\n                  </div>\n                </div>\n            )\n          })\n        }\n        {\n          messagesChannels.length === 0 ? null : messagesChannels.find(messagesChannel => messagesChannel.id === selectedChannel.id).messages.map((message, index) => {\n\n            // Trensforme la date du format texte au format js\n            var date = new Date(message.date);\n            // Mise en forme de la date\n            date = `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()} ${date.getHours()}:${date.getMinutes()}`\n\n            // Détecte si plus de deux messages a la suite sont du même destinataire\n            var lastSenderPass = lastSenderNow;\n            lastSenderNow = message.sender.id;\n\n            return (\n              lastSenderNow !== lastSenderPass\n                ?\n                <div\n                  className=\"message-body-message parents\"\n                  key={index}\n                >\n                  <div className=\"message-body-message-avatar\">\n                    <img className=\"avatar\"\n                      src={client == null ? null : message.sender.id === client.id ? `${client.avatar_url}${client.id}` : `${client.avatar_url}${message.sender.id}`}\n                      alt=\"user profil\" />\n                  </div>\n                  <h2 className=\"message-body-message-header\">\n                    <span className=\"pseudo\">\n                      {message.sender.pseudo}\n                    </span>\n                    <span className=\"timestamp\">\n                      {date}\n                    </span>\n                  </h2>\n                  <div className=\"message-body-message-text\">\n                    {message.text}\n                  </div>\n                </div>\n                :\n                <div\n                  className=\"message-body-message children\"\n                  key={index}\n                >\n                  <div className=\"message-body-message-text\">\n                    {message.file == null ? null : <a target=\"_blank\" href={`http://localhost:3000/api/file/get/files/${message.file}`}>File </a> }\n                    {message.text}\n                  </div>\n                </div>\n            )\n          })\n        }\n        <div className=\"message-body-spacer\" id=\"spacer\"></div>\n      </div>\n      <div className=\"message-footer\">\n        <form className=\"message-footer-toolbar\" onSubmit={handleSendMsg}>\n\n          <div className=\"message-footer-toolbar-uploadBtn\">\n            <svg onClick={handleAddInputFile} className=\"iconAdd\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n              <path fill=\"currentColor\" d=\"M12 2.00098C6.486 2.00098 2 6.48698 2 12.001C2 17.515 6.486 22.001 12 22.001C17.514 22.001 22 17.515 22 12.001C22\n                    6.48698 17.514 2.00098 12 2.00098ZM17 13.001H13V17.001H11V13.001H7V11.001H11V7.00098H13V11.001H17V13.001Z\">\n              </path>\n            </svg>\n            {\n              fileInput == null ? null :\n                <svg onClick={handleDeleteInputFile} className=\"iconDelete\" viewBox=\"0 0 512 512\" width=\"24\" height=\"24\" x=\"0\" y=\"0\">\n                  <g  fill=\"currentColor\" stroke=\"none\" transform=\"translate(0.000000,512.000000) scale(0.100000,-0.100000)\">\n                    <path d=\"M1150 4671 c-30 -9 -73 -29 -95 -43 -53 -33 -128 -115 -155 -168 -51\n                    -100 -50 -48 -50 -1900 0 -1853 -1 -1800 50 -1901 28 -54 111 -142 164 -173\n                    101 -59 25 -57 1517 -54 l1364 3 58 23 c72 29 172 120 210 191 58 106 57 70\n                    57 1496 0 794 -4 1333 -10 1369 -5 32 -23 88 -40 125 -28 61 -69 104 -488 522\n                    -422 422 -462 459 -527 490 l-70 34 -965 2 c-901 2 -969 1 -1020 -16z m1928\n                    -315 c15 -8 215 -203 444 -433 360 -362 417 -423 423 -455 4 -20 4 -41 0 -47\n                    -4 -7 -96 -11 -278 -11 -291 0 -366 9 -448 50 -54 28 -142 111 -173 164 -51\n                    88 -56 126 -56 448 l0 298 30 0 c17 0 43 -6 58 -14z m-960 -1712 c23 -9 111\n                    -89 239 -217 l203 -201 207 206 c228 225 241 233 344 226 110 -8 189 -93 189\n                    -205 0 -29 -7 -70 -15 -90 -10 -22 -93 -114 -217 -240 l-202 -203 201 -203\n                    c212 -213 243 -254 243 -332 0 -42 -29 -116 -58 -149 -26 -30 -113 -66 -157\n                    -66 -78 1 -119 31 -332 243 l-203 201 -203 -202 c-126 -124 -218 -207 -240\n                    -217 -20 -8 -61 -15 -90 -15 -112 0 -197 79 -205 189 -7 103 1 116 226 344\n                    l206 207 -206 208 c-225 227 -233 240 -226 343 10 142 160 230 296 173z\"/>\n                  </g>\n                </svg>\n            }\n          </div>\n         \n\n          <textarea id=\"msgTextarea\" className=\"message-footer-toolbar-textarea scroller\" placeholder={\"Envoyer un message à \" + selectedChannel.recipients[0].pseudo}\n            spellCheck=\"true\" autoFocus autoComplete=\"off\"\n            value={textInput}\n            onChange={e => setTextInput(e.target.value)}\n            required\n          ></textarea>\n\n          <button className=\"message-footer-toolbar-sendBtn\" type=\"submit\">\n            <svg viewBox=\"0 0 512 512\" aria-hidden=\"false\" width=\"20\" height=\"20\">\n              <path fill=\"currentColor\" d=\"M481.508,210.336L68.414,38.926c-17.403-7.222-37.064-4.045-51.309,8.287C2.86,59.547-3.098,78.551,1.558,96.808\n                  L38.327,241h180.026c8.284,0,15.001,6.716,15.001,15.001c0,8.284-6.716,15.001-15.001,15.001H38.327L1.558,415.193\n                  c-4.656,18.258,1.301,37.262,15.547,49.595c14.274,12.357,33.937,15.495,51.31,8.287l413.094-171.409\n                  C500.317,293.862,512,276.364,512,256.001C512,235.638,500.317,218.139,481.508,210.336z\" />\n            </svg>\n          </button>\n\n        </form>\n      </div>\n    </div>\n  )\n}"]},"metadata":{},"sourceType":"module"}